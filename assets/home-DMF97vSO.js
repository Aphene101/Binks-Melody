import"./firebase-CbGDgsoV.js";import"./main-DYchdyn9.js";const E="804bfeee";async function f(e){const n=`https://api.jamendo.com/v3.0/tracks/?client_id=${E}&format=json&limit=10&search=${encodeURIComponent(e)}`;return(await(await fetch(n)).json()).results}const h=document.querySelector(".search-input"),p=document.querySelector(".section-title"),y=document.querySelector(".grid-container"),d=document.getElementById("search-results"),t=document.getElementById("player-audio"),B=document.getElementById("p-title"),I=document.getElementById("p-artist"),L=document.getElementById("p-cover"),M=document.getElementById("p-current"),T=document.getElementById("p-duration"),u=document.getElementById("p-seek"),g=document.getElementById("p-play"),k=document.getElementById("p-prev"),C=document.getElementById("p-next"),l=document.getElementById("play-icon");let s=[],o=-1;function $(e){d.innerHTML="",e.forEach((n,a)=>{const c=document.createElement("div"),i=document.createElement("div");i.classList.add("song-item"),i.innerHTML=`
        <div class="song-left">
            <div class="song-thumb">
            <img src="${n.album_image}" alt="Album Art">
            </div>
            <div class="song-info">
            <span class="song-title">${n.name}</span>
            <span class="song-artist">${n.artist_name}</span>
            </div>
        </div>
        <button class="song-menu">
            <img class="more-icon" src="/Binks-Melody/Media/More-icon.svg">
        </button>
        `,i.querySelector(".song-left").addEventListener("click",()=>{m(n.audio,n,a,e)}),c.appendChild(i);const r=document.createElement("hr");r.classList.add("song-separator"),c.appendChild(r),d.appendChild(c)})}function m(e,n,a,c){B.textContent=n.name,I.textContent=n.artist_name,L.src=n.album_image,l.src="/Binks-Melody/Media/Pause-icon.svg",document.getElementById("player").classList.add("open"),t.pause(),t.src=e,t.load(),s=c,o=a,u.value=0,t.addEventListener("canplay",function i(){t.removeEventListener("canplay",i),t.play().catch(r=>{console.warn("Playback failed:",r)})})}t.addEventListener("loadedmetadata",()=>{T.textContent=v(t.duration)});t.addEventListener("timeupdate",()=>{if(t.duration){const e=t.currentTime/t.duration*100;u.value=e,M.textContent=v(t.currentTime)}});u.addEventListener("input",()=>{t.duration&&(t.currentTime=u.value/100*t.duration)});g&&g.addEventListener("click",()=>{t.paused?(t.play(),l.src="/Binks-Melody/Media/Pause-icon.svg",l.alt="Pause"):(t.pause(),l.src="/Binks-Melody/Media/Play-icon.svg",l.alt="Play")});function v(e){const n=Math.floor((e||0)/60),a=Math.floor((e||0)%60);return`${n}:${a<10?"0":""}${a}`}k.addEventListener("click",()=>{if(s.length>0){o=(o-1+s.length)%s.length;const e=s[o];m(e.audio,e,o,s)}});C.addEventListener("click",()=>{if(s.length>0){o=(o+1)%s.length;const e=s[o];m(e.audio,e,o,s)}});h.addEventListener("input",async e=>{const n=e.target.value.trim();if(n.length>2){const a=await f(n);$(a),p.style.display="none",y.style.display="none",d.style.display="flex"}else d.innerHTML="",p.style.display="flex",y.style.display="flex",d.style.display="none"});
