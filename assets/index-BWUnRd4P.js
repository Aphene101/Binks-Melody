import{g as u,a as d,s as l,b as c,c as m,d as g,e as f}from"./firebase-BJqLWyn6.js";import"./main-Bpjt9ygV.js";const h=u(),w=d(h);function y(e){switch(e.code||e.message){case"auth/invalid-email":return"Please enter a valid email address.";case"auth/user-not-found":return"No account found with this email or username.";case"auth/invalid-credential":return"Email / Password is incorrect.";case"auth/user-disabled":return"This account has been disabled.";case"auth/email-not-verified":return"Please verify your email before logging in.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";default:return e.message||"Something went wrong. Please try again."}}async function p(e){if(e.includes("@"))return e;const t=g(w,"usernames",e),n=await f(t);if(n.exists())return n.data().email;throw new Error("Username not found")}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("#login-email"),t=document.querySelector("#login-password"),n=document.querySelector("#login-button"),a=document.querySelector("#login-error");!e||!t||!n||!a||n.addEventListener("click",async()=>{const o=e.value.trim(),s=t.value;if(!o||!s){a.textContent="Please enter both fields.";return}try{const r=await p(o);if(!(await l(c,r,s)).user.emailVerified)throw await m(c),{code:"auth/email-not-verified"};a.textContent="",window.location.href="./home.html"}catch(r){console.error("Login error:",r);const i=y(r);a.textContent=i}})});
